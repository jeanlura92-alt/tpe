<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>{% if mode == 'edit' %}Modifier le contact{% else %}Nouveau contact{% endif %} - CRM WhatsApp</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <div class="container single-page">
    <aside class="card sidebar">
      <h3>Navigation</h3>
      <nav class="sidebar-nav">
        <a href="/"><span>Pipeline WhatsApp</span></a>
        <a class="active" href="/contacts"><span>Contacts</span></a>
        <a href="/contacts/new"><span>+ Nouveau contact</span></a>
      </nav>
    </aside>

    <main class="card main">
      <h2 style="margin-bottom: 12px;">
        {% if mode == 'edit' %}Modifier le contact{% else %}Nouveau contact{% endif %}
      </h2>

      {% if error %}
        <div class="alert alert-error" style="margin-bottom: 12px;">
          {{ error }}
        </div>
      {% endif %}

      <form method="post" action="/contacts/new" class="form-grid">
        <div class="form-field">
          <label for="name">Nom du contact</label>
          <input id="name" name="name" type="text"
                 value="{{ name or '' }}" required>
        </div>

        <div class="form-field">
          <label for="phone">Téléphone WhatsApp <span style="color:#dc2626">*</span></label>
          <input id="phone" name="phone" type="tel"
                 placeholder="ex : +33 6 12 34 56 78"
                 value="{{ phone or '' }}" required>
          <div class="hint small muted">
            Ce numéro est obligatoire pour envoyer des messages WhatsApp.
          </div>
        </div>

        <div class="form-field">
          <label for="email">Email</label>
          <input id="email" name="email" type="email"
                 value="{{ email or '' }}">
        </div>

        <div class="form-field">
          <label for="type">Profil</label>
          <select id="type" name="type">
            <option value="client" {% if type == 'client' %}selected{% endif %}>Client</option>
            <option value="prospect" {% if type == 'prospect' %}selected{% endif %}>Prospect</option>
            <option value="fournisseur" {% if type == 'fournisseur' %}selected{% endif %}>Fournisseur</option>
            <option value="autre" {% if type == 'autre' %}selected{% endif %}>Autre</option>
          </select>
        </div>

        <div class="form-field">
          <label for="company">Entreprise</label>
          <input id="company" name="company" type="text"
                 value="{{ company or '' }}">
        </div>

        <div class="form-field">
          <label for="address">Adresse</label>
          <input id="address" name="address" type="text"
                 value="{{ address or '' }}">
        </div>

        <div class="form-field" style="grid-column:1 / -1;">
          <label for="tags">Tags (mots-clés)</label>
          <input id="tags" name="tags" type="text"
                 placeholder="ex : VIP, devis en cours, relance"
                 value="{{ tags or '' }}">
        </div>

        <div class="form-actions" style="grid-column:1 / -1; display:flex; gap:8px; margin-top:16px;">
          <button class="btn btn-primary" type="submit">
            {% if mode == 'edit' %}Mettre à jour{% else %}Créer le contact{% endif %}
          </button>
          <a href="/contacts" class="btn btn-ghost">Annuler</a>
        </div>
      </form>
    </main>
  </div>
</body>
</html>